<?xml version="1.0" encoding="UTF-8"?>

<!-- =====================================================================
ICARUSTopologyAppAi.xml
Generated by fpp-to-xml
====================================================================== -->
<assembly name="ICARUS">

  <import_component_type>Drv/TcpClient/TcpClientComponentAi.xml</import_component_type>
  <import_component_type>ICARUS/Components/ADCS/ADCSComponentAi.xml</import_component_type>
  <import_component_type>ICARUS/Components/Comms/CommsComponentAi.xml</import_component_type>
  <import_component_type>ICARUS/Components/Microcontroller/MicrocontrollerComponentAi.xml</import_component_type>
  <import_component_type>ICARUS/Components/NandFlash/NandFlashComponentAi.xml</import_component_type>
  <import_component_type>Svc/ActiveLogger/ActiveLoggerComponentAi.xml</import_component_type>
  <import_component_type>Svc/CmdDispatcher/CommandDispatcherComponentAi.xml</import_component_type>
  <import_component_type>Svc/PassiveConsoleTextLogger/PassiveTextLoggerComponentAi.xml</import_component_type>
  <import_component_type>Svc/PosixTime/PosixTimeComponentAi.xml</import_component_type>
  <import_component_type>Svc/TlmChan/TlmChanComponentAi.xml</import_component_type>

  <instance namespace="ICARUS" name="comms" type="Comms" base_id="0x100" base_id_window="1"/>
  <instance namespace="ICARUS" name="mcu" type="Microcontroller" base_id="0x200" base_id_window="2"/>
  <instance namespace="ICARUS" name="flash" type="NandFlash" base_id="0x300" base_id_window="1"/>
  <instance namespace="ICARUS" name="adcs" type="ADCS" base_id="0x400" base_id_window="1"/>
  <instance namespace="Svc" name="cmdDisp" type="CommandDispatcher" base_id="0x500" base_id_window="11"/>
  <instance namespace="Svc" name="eventLogger" type="ActiveLogger" base_id="0x600" base_id_window="5"/>
  <instance namespace="Svc" name="timeComp" type="PosixTime" base_id="0x700" base_id_window="0"/>
  <instance namespace="Svc" name="tlmSend" type="TlmChan" base_id="0x800" base_id_window="0"/>
  <instance namespace="Svc" name="textLogger" type="PassiveTextLogger" base_id="0x900" base_id_window="0"/>
  <instance namespace="Drv" name="comDriver" type="TcpClient" base_id="0xA00" base_id_window="0"/>

  <!-- @FPL START AltitudeCommandFlow -->
  <connection name="[unused]">
    <source component="comms" port="CommsCmdOut" type="[unused]" num="0"/>
    <target component="mcu" port="MicrocontrollerIn" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="flash" port="FlashCmdOut" type="[unused]" num="0"/>
    <target component="adcs" port="ADCSCmdIn" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="mcu" port="MicrocontrollerOut" type="[unused]" num="0"/>
    <target component="flash" port="FlashCmdIn" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START Command -->
  <connection name="[unused]">
    <source component="cmdDisp" port="compCmdSend" type="[unused]" num="0"/>
    <target component="cmdDisp" port="CmdDisp" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="cmdDisp" port="compCmdSend" type="[unused]" num="2"/>
    <target component="eventLogger" port="CmdDisp" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START CommandRegistration -->
  <connection name="[unused]">
    <source component="cmdDisp" port="CmdReg" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdReg" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="eventLogger" port="CmdReg" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdReg" type="[unused]" num="2"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START CommandResponse -->
  <connection name="[unused]">
    <source component="cmdDisp" port="CmdStatus" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdStat" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="eventLogger" port="CmdStatus" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdStat" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START CommsStandardPorts -->
  <connection name="[unused]">
    <source component="cmdDisp" port="compCmdSend" type="[unused]" num="1"/>
    <target component="comms" port="cmdIn" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="comms" port="cmdRegOut" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdReg" type="[unused]" num="1"/>
  </connection>
  <connection name="[unused]">
    <source component="comms" port="cmdResponseOut" type="[unused]" num="0"/>
    <target component="cmdDisp" port="compCmdStat" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="comms" port="logOut" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="comms" port="logTextOut" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="comms" port="timeCaller" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START Events -->
  <connection name="[unused]">
    <source component="adcs" port="logOut" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="cmdDisp" port="Log" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="eventLogger" port="Log" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="flash" port="logOut" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="mcu" port="logOut" type="[unused]" num="0"/>
    <target component="eventLogger" port="LogRecv" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START Telemetry -->
  <connection name="[unused]">
    <source component="adcs" port="tlmOut" type="[unused]" num="0"/>
    <target component="tlmSend" port="TlmRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="cmdDisp" port="Tlm" type="[unused]" num="0"/>
    <target component="tlmSend" port="TlmRecv" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="flash" port="tlmOut" type="[unused]" num="0"/>
    <target component="tlmSend" port="TlmRecv" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START TextEvents -->
  <connection name="[unused]">
    <source component="adcs" port="logTextOut" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="cmdDisp" port="LogText" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="eventLogger" port="LogText" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="flash" port="logTextOut" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="mcu" port="logTextOut" type="[unused]" num="0"/>
    <target component="textLogger" port="TextLogger" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

  <!-- @FPL START Time -->
  <connection name="[unused]">
    <source component="adcs" port="timeCaller" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="cmdDisp" port="Time" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="eventLogger" port="Time" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="flash" port="timeCaller" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <connection name="[unused]">
    <source component="mcu" port="timeCaller" type="[unused]" num="0"/>
    <target component="timeComp" port="timeGetPort" type="[unused]" num="0"/>
  </connection>
  <!-- @FPL END -->

</assembly>
